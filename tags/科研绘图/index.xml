<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>科研绘图 on HaoZhong03 blog</title><link>https://HaoZhong03.github.io/tags/%E7%A7%91%E7%A0%94%E7%BB%98%E5%9B%BE/</link><description>Recent content in 科研绘图 on HaoZhong03 blog</description><generator>Hugo -- 0.150.0</generator><language>zh</language><lastBuildDate>Fri, 19 Sep 2025 14:03:27 +0800</lastBuildDate><atom:link href="https://HaoZhong03.github.io/tags/%E7%A7%91%E7%A0%94%E7%BB%98%E5%9B%BE/index.xml" rel="self" type="application/rss+xml"/><item><title>[R]ggplot2官方文档简明指南</title><link>https://HaoZhong03.github.io/docss/ggplot2/</link><pubDate>Fri, 19 Sep 2025 14:03:27 +0800</pubDate><guid>https://HaoZhong03.github.io/docss/ggplot2/</guid><description>&lt;p&gt;苯人不生产教程，只是文档的搬运工。本文是基于&lt;a href="https://ggplot2.tidyverse.org/"&gt;ggplot2官方文档&lt;/a&gt;建立的最简明中文翻译，力图作为一个词典，适合于所有像我一样被ggplot2折磨到夜不能寐辗转反侧的人使用。&lt;/p&gt;
&lt;p&gt;详细教程可参考&lt;a href="https://ggplot2-book.org/"&gt;ggplot2 book&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id="1-ggplot2原理简介"&gt;1. ggplot2原理简介&lt;/h2&gt;
&lt;p&gt;&lt;img alt="ex1" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/overview_graphic-1.png"&gt;&lt;/p&gt;
&lt;p&gt;ggplot2绘图有7个组成部分，其中&lt;code&gt;data&lt;/code&gt;、&lt;code&gt;Mapping&lt;/code&gt;、&lt;code&gt;Layers&lt;/code&gt;是必需的。&lt;/p&gt;</description><content:encoded><![CDATA[<p>苯人不生产教程，只是文档的搬运工。本文是基于<a href="https://ggplot2.tidyverse.org/">ggplot2官方文档</a>建立的最简明中文翻译，力图作为一个词典，适合于所有像我一样被ggplot2折磨到夜不能寐辗转反侧的人使用。</p>
<p>详细教程可参考<a href="https://ggplot2-book.org/">ggplot2 book</a>。</p>
<h2 id="1-ggplot2原理简介">1. ggplot2原理简介</h2>
<p><img alt="ex1" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/overview_graphic-1.png"></p>
<p>ggplot2绘图有7个组成部分，其中<code>data</code>、<code>Mapping</code>、<code>Layers</code>是必需的。</p>
<h3 id="11-data">1.1 Data</h3>
<p>顾名思义，这一层决定你绘图所需的数据来源：</p>
<pre tabindex="0"><code>ggplot(data = mpg)
</code></pre><p><code>mpg</code>是你的数据集。</p>
<h3 id="12-mapping">1.2 Mapping</h3>
<p>这一层决定你的数据如何映射到图像的属性上。</p>
<pre tabindex="0"><code>ggplot(mpg, mapping = aes(x = cty, y = hwy))
</code></pre><p>此命令将<code>mpg</code>数据集中的<code>cty</code>和<code>hwy</code>列分别映射到x和y坐标。</p>
<h3 id="13-layers">1.3 Layers</h3>
<p>这一层即图层，决定你的图像以何种方式被绘制。</p>
<pre tabindex="0"><code>ggplot(mpg, aes(cty, hwy)) +
  # 创建散点图
  geom_point() +
  # 拟合并展示趋势线
  geom_smooth(formula = y ~ x, method = &#34;lm&#34;)
</code></pre><p><img alt="ex1.3" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/example_layer-1.png"></p>
<h3 id="14-scales">1.4 Scales</h3>
<p>将图上的内容赋予不同的尺度，模板为<code>scale_{aesthetic}_{type}()</code>。根据映射<code>{aesthetic}</code>中的某种属性，按照<code>{type}</code>赋予尺度。</p>
<pre tabindex="0"><code>ggplot(mpg, aes(cty, hwy, colour = class)) +
  geom_point() +
  scale_colour_viridis_d()
</code></pre><p>即根据colour，将图像按照viridis调色板赋予尺度。</p>
<p><img alt="ex1.4" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/example_scales-1.png"></p>
<h3 id="15-facets">1.5 Facets</h3>
<p>拆分数据集至不同的面板。</p>
<pre tabindex="0"><code>ggplot(mpg, aes(cty, hwy)) +
  geom_point() +
  facet_grid(year ~ drv)
</code></pre><p><img alt="ex1.5" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/example_facets-1.png"></p>
<h3 id="16-coordinates">1.6 Coordinates</h3>
<p>指定图像的坐标。比如使用<code>coord_fixed()</code>自动设置图像横纵坐标比例。</p>
<pre tabindex="0"><code>ggplot(mpg, aes(cty, hwy)) +
  geom_point() +
  coord_fixed()
</code></pre><p><img alt="ex3" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/example_coords-1.png"></p>
<h3 id="17-themes">1.7 Themes</h3>
<p>使用内置的<code>theme_*()</code>函数或<code>theme()</code>设置你的主题。</p>
<pre tabindex="0"><code>ggplot(mpg, aes(cty, hwy, colour = class)) +
  geom_point() +
  theme_minimal() +
  theme(
    legend.position = &#34;top&#34;,
    axis.line = element_line(linewidth = 0.75),
    axis.line.x.bottom = element_line(colour = &#34;blue&#34;)
  )
</code></pre><p><img alt="ex4" loading="lazy" src="https://ggplot2.tidyverse.org/articles/ggplot2_files/figure-html/example_theme-1.png"></p>
<h2 id="2-绘图基础">2. 绘图基础</h2>
<p>所有的图都开始于<code>ggplot()</code>，它提供了数据的来源和映射的方式。随后，你才能用<code>+</code>增加更多的内容。保存图像则使用<code>ggsave()</code>。</p>
<table>
  <thead>
      <tr>
          <th>API</th>
          <th>Function</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>ggplot()</code></td>
          <td>创建新图</td>
      </tr>
      <tr>
          <td><code>aes()</code></td>
          <td>构建映射</td>
      </tr>
      <tr>
          <td><code>add_gg()</code>;<code>%+%</code></td>
          <td>增加组成部分</td>
      </tr>
      <tr>
          <td><code>ggsave()</code></td>
          <td>保存图像</td>
      </tr>
      <tr>
          <td><code>qplot()</code>;<code>quickplot()</code></td>
          <td>快速画图</td>
      </tr>
  </tbody>
</table>
<h2 id="3-layers">3. Layers</h2>
<h3 id="31-geoms">3.1 Geoms</h3>
<hr>
<p>施工中</p>
<hr>
<script src="https://giscus.app/client.js"
        data-repo="Haozhong03/Haozhong03.github.io"
        data-repo-id="R_kgDOPutG0g"
        data-category="Announcements"
        data-category-id="DIC_kwDOPutG0s4Cvi80"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>]]></content:encoded></item></channel></rss>